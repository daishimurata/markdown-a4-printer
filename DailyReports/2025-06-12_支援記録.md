---
date: "<% tp.date.now("YYYY-MM-DD") %>"
status: inactive
auto_generated: true
---

# <% tp.date.now("YYYY年MM月DD日") %>（<%* 
const days = ['日', '月', '火', '水', '木', '金', '土'];
const dayIndex = tp.date.now("d");
tR += days[dayIndex];
%>）支援記録

## 🔸 今日の出勤利用者

### 📋 出勤者一覧：
```dataviewjs
const today = "<% tp.date.now("YYYY-MM-DD") %>";
let scheduledUsers = [];

const users = dv.pages('"People"').where(p => 
    p.schedule && p.schedule.some(date => 
        date && date.toString().includes(today)
    )
);

if (users.length > 0) {
    for (let user of users) {
        const userName = user.file.name;
        const userKana = user.kana || "";
        scheduledUsers.push(userName);
        dv.el("div", `• ${userName}（${userKana}）`);
    }
} else {
    dv.el("div", "予定表から取得された利用者はありません");
}
```

> [!info]- 🔹 追加で出勤する場合（クリックして展開）
> - [ ] 山口恭平（やまぐち きょうへい）
> - [ ] 星野秀汰（ほしの しゅうた）
> - [ ] 服部郁子（はっとり いくこ）
> - [ ] 柿内環奈（かきうち かんな）
> - [ ] 水谷珠美（みずたに たまみ）
> - [ ] 若林沙友里（わかばやし さゆり）
> - [ ] 長屋湧大（ながや わくた）
> - [ ] 小林浩秋（こばやし ひろあき）
> - [ ] 高見昌宏（たかみ まさひろ）
> - [ ] 湯原優斗（ゆはら ゆうと）
> - [ ] 高田美帆（たかだ みほ）※不定期

> [!warning]- ❌ 欠席者（クリックして展開）
> - [ ] 山口恭平（やまぐち きょうへい）
> - [ ] 星野秀汰（ほしの しゅうた）
> - [ ] 服部郁子（はっとり いくこ）
> - [ ] 柿内環奈（かきうち かんな）
> - [ ] 水谷珠美（みずたに たまみ）
> - [ ] 若林沙友里（わかばやし さゆり）
> - [ ] 長屋湧大（ながや わくた）
> - [ ] 小林浩秋（こばやし ひろあき）
> - [ ] 高見昌宏（たかみ まさひろ）
> - [ ] 湯原優斗（ゆはら ゆうと）
> - [ ] 高田美帆（たかだ みほ）※不定期

---

## 🔸 今日の出勤スタッフ

### 📋 出勤スタッフ一覧：
```dataviewjs
const today = "<% tp.date.now("YYYY-MM-DD") %>";
let scheduledStaff = [];

const staff = dv.pages('"Staff"').where(s => 
    s.shift && s.shift.some(shift => 
        shift && shift.toString().includes(today)
    )
);

if (staff.length > 0) {
    for (let member of staff) {
        const todayShift = member.shift.find(shift => 
            shift && shift.toString().includes(today)
        );
        const shiftType = todayShift ? todayShift.toString().split(' ')[1] : '';
        const shiftName = shiftType === 'A' ? '（早番）' : 
                         shiftType === 'B' ? '（遅番）' : 
                         shiftType === 'C' ? '（休み）' : '';
        
        if (shiftType !== 'C') {
            const staffName = member.file.name;
            scheduledStaff.push(staffName);
            dv.el("div", `• ${staffName}${shiftName}`);
        }
    }
} else {
    dv.el("div", "予定表から取得されたスタッフはありません");
}
```

> [!info]- 🔹 追加で出勤する場合（クリックして展開）
> - [ ] 村田太志（早番）
> - [ ] 松本愛美（遅番）
> - [ ] 中井理恵
> - [ ] 小西瞳（小西ひとみ）
> - [ ] 水谷麗香
> - [ ] 吉澤冬美
> - [ ] 水戸紀昭（遅番）
> - [ ] 木村菜々美
> - [ ] 河相由梨奈

> [!warning]- ❌ 欠席スタッフ（クリックして展開）
> - [ ] 村田太志（早番）
> - [ ] 松本愛美（遅番）
> - [ ] 中井理恵
> - [ ] 小西瞳（小西ひとみ）
> - [ ] 水谷麗香
> - [ ] 吉澤冬美
> - [ ] 水戸紀昭（遅番）
> - [ ] 木村菜々美
> - [ ] 河相由梨奈

---

## 🔹 今週の利用者予定

```dataviewjs
const today = "<% tp.date.now("YYYY-MM-DD") %>";
const currentDate = new Date(today);

// 月曜日を週の始まりとして計算
const startOfWeek = new Date(currentDate);
const dayOfWeek = currentDate.getDay(); // 0=日曜, 1=月曜, ...
const mondayOffset = dayOfWeek === 0 ? -6 : 1 - dayOfWeek; // 月曜日までの日数
startOfWeek.setDate(currentDate.getDate() + mondayOffset);

// 週の日付配列を作成（月〜日）
const weekDates = [];
const weekDays = ['月', '火', '水', '木', '金', '土', '日'];
for (let i = 0; i < 7; i++) {
    const date = new Date(startOfWeek);
    date.setDate(startOfWeek.getDate() + i);
    weekDates.push(date.toISOString().split('T')[0]);
}

// 利用者データを取得
const users = dv.pages('"People"').where(p => p.schedule);
const userScheduleData = [];

for (let user of users) {
    const userName = user.file.name;
    const weekSchedule = [];
    
    for (let date of weekDates) {
        const hasSchedule = user.schedule && user.schedule.some(scheduleDate => 
            scheduleDate && scheduleDate.toString().includes(date)
        );
        weekSchedule.push(hasSchedule ? '●' : '');
    }
    
    // 高田美帆さんは不定期として特別処理
    if (userName === '高田美帆') {
        for (let i = 0; i < 5; i++) { // 平日のみ※マーク
            if (weekSchedule[i] === '') weekSchedule[i] = '※';
        }
    }
    
    userScheduleData.push([userName, ...weekSchedule]);
}

// テーブルを作成
const tableHeaders = ['利用者 \\ 日', ...weekDays];
let tableMarkdown = '| ' + tableHeaders.join(' | ') + ' |\n';
tableMarkdown += '| ' + tableHeaders.map(() => '---').join(' | ') + ' |\n';

for (let userData of userScheduleData) {
    tableMarkdown += '| ' + userData.join(' | ') + ' |\n';
}

dv.el("div", tableMarkdown);

// 高田美帆さんの注釈
if (userScheduleData.some(u => u[0] === '高田美帆')) {
    dv.el("p", "※高田美帆さん：不定期のため事前予定なし");
}
```

---

## 🔹 今週のスタッフシフト

```dataviewjs
const today = "<% tp.date.now("YYYY-MM-DD") %>";
const currentDate = new Date(today);

// 月曜日を週の始まりとして計算
const startOfWeek = new Date(currentDate);
const dayOfWeek = currentDate.getDay();
const mondayOffset = dayOfWeek === 0 ? -6 : 1 - dayOfWeek;
startOfWeek.setDate(currentDate.getDate() + mondayOffset);

// 週の日付配列を作成（月〜日）
const weekDates = [];
const weekDays = ['月', '火', '水', '木', '金', '土', '日'];
for (let i = 0; i < 7; i++) {
    const date = new Date(startOfWeek);
    date.setDate(startOfWeek.getDate() + i);
    weekDates.push(date.toISOString().split('T')[0]);
}

// スタッフデータを取得
const staff = dv.pages('"Staff"').where(s => s.shift);
const staffShiftData = [];

for (let member of staff) {
    const staffName = member.file.name;
    const weekShift = [];
    
    for (let date of weekDates) {
        const todayShift = member.shift && member.shift.find(shift => 
            shift && shift.toString().includes(date)
        );
        
        let shiftDisplay = '';
        if (todayShift) {
            const shiftType = todayShift.toString().split(' ')[1];
            if (shiftType === 'A') {
                shiftDisplay = '早番<br/>9:00-15:30';
            } else if (shiftType === 'B') {
                shiftDisplay = '遅番<br/>10:30-17:00';
            }
            // C（休み）の場合は空文字のまま
        }
        weekShift.push(shiftDisplay);
    }
    
    staffShiftData.push([staffName, ...weekShift]);
}

// テーブルを作成
const tableHeaders = ['スタッフ \\ 日', ...weekDays];
let tableMarkdown = '| ' + tableHeaders.join(' | ') + ' |\n';
tableMarkdown += '| ' + tableHeaders.map(() => '---').join(' | ') + ' |\n';

for (let staffData of staffShiftData) {
    tableMarkdown += '| ' + staffData.join(' | ') + ' |\n';
}

dv.el("div", tableMarkdown);
```

## 🔹 本日の作業内容（自由記載）

### 午前の作業（9:00-12:00）
買い出し、お楽しみ会の準備

### 午後の作業（13:00-15:30）
ナス、ズッキーニの袋詰め

### その他の活動・特記事項
ナス95袋　ズッキーニ17袋みどりへ出荷

## 📝 スタッフ記入欄

<!--利用者の様子変化、今日の良かった点や成果、改善点課題気づきなどを記載してください -->
### 本日の記録
支援記録｜記録者：松本】

  

午前中、さゆりさんをお迎えし、伊船で待機している間に一緒に買い物リストを作成しました。その後、さゆりさんとともに「ココカラファイン」と「エフワン」へ買い物に出かけました。

  

道中で「どこのスーパーが安いですか？」とお聞きしたところ、「お肉ならベーシックが安いと、いつも主人と話しています」と教えてくださいました。本日はお肉の購入予定がなかったため、近くの「エフワン」へ向かうことになりました。途中、「エフワンの近くに住んだら、毎日通いたい。キングもあるしね」といったお話もあり、リラックスした様子が伺えました。

  

買い物後は、冬美さん・服部さん・こうきさんとともにお楽しみ会の昼食準備を行いました。こうきさんは「じゃがいもピザ」の盛り付けと、じゃがいもを潰す作業を担当。服部さんは黙々と皮むきや洗い物を進めてくださいました。さゆりさんは食材のカットや、いももちを丸める作業を担当されていました。

  

準備中は和気あいあいとした雰囲気で、みなさんが楽しみながら作業に取り組んでいる様子が印象的でした。

  

午後は、松本・さゆり・しゅうた・こうき・かんな・ゆうとの6名で、ナスの袋詰め作業を実施しました。かんなさんはバッグシーラーを担当し、他の方々は袋詰め作業を分担して行いました。

  

ゆうとさんは体調が優れない様子で、休みながらの作業となりましたが、「ご飯を食べたら少し良くなった」と話しておられました。詳しく体調について尋ねたところ、「お腹が冷えただけだと思う」とのことでした。ただ、最近よく「気持ち悪い」と訴えることがあるため、必要に応じて医療機関の受診を検討した方がよいと考えられます。

### 申し送り事項
<!-- 申し送り事項を書いてください -->


---

## 🎤 ChatGPT用プロンプト（自動生成・コピー用）

```
以下の<% tp.date.now("YYYY年MM月DD日") %>の日報内容を、利用者ごとの個別記録として整理してください。

【基本情報】
日付：<% tp.date.now("YYYY年MM月DD日") %>
記録者：[スタッフ名を記入してください]

【出勤利用者】
<%*
// 今日の出勤予定利用者を静的に表示（ChatGPT用）
const today = tp.date.now("YYYY-MM-DD");
const peopleFiles = app.vault.getMarkdownFiles().filter(f => f.path.startsWith("People/"));
const todayUsers = [];

for (let file of peopleFiles) {
    const frontmatter = app.metadataCache.getFileCache(file)?.frontmatter;
    
    if (frontmatter?.schedule && frontmatter.schedule.some(date => 
        date && date.toString().includes(today)
    )) {
        const name = file.basename;
        const kana = frontmatter.kana || "";
        todayUsers.push(`• ${name}（${kana}）`);
    }
}

if (todayUsers.length > 0) {
    tR += todayUsers.join('\n');
} else {
    tR += "予定表から取得された利用者はありません";
}
%>

追加出勤：[チェックした場合はここに記載]
欠席者：[チェックした場合はここに記載]

【出勤スタッフ】
<%*
// 今日の勤務予定スタッフを静的に表示（ChatGPT用）
const today = tp.date.now("YYYY-MM-DD");
const staffFiles = app.vault.getMarkdownFiles().filter(f => f.path.startsWith("Staff/"));
const todayStaff = [];

for (let file of staffFiles) {
    const frontmatter = app.metadataCache.getFileCache(file)?.frontmatter;
    
    if (frontmatter?.shift) {
        const todayShift = frontmatter.shift.find(shift => 
            shift && shift.toString().includes(today)
        );
        if (todayShift) {
            const shiftType = todayShift.toString().split(' ')[1];
            const shiftName = shiftType === 'A' ? '（早番）' : 
                             shiftType === 'B' ? '（遅番）' : '';
            if (shiftType !== 'C') {
                const name = file.basename;
                todayStaff.push(`• ${name}${shiftName}`);
            }
        }
    }
}

if (todayStaff.length > 0) {
    tR += todayStaff.join('\n');
} else {
    tR += "予定表から取得されたスタッフはありません";
}
%>

追加出勤：[チェックした場合はここに記載]
欠席スタッフ：[チェックした場合はここに記載]

【作業内容】
[本日の作業内容をここに貼り付け]

【スタッフ記入内容】
[本日の記録をここに貼り付け]

【申し送り事項】
[申し送り事項をここに貼り付け]

---

上記の情報を基に、以下の形式で整理してください：

1. **利用者ごとの個別記録**として分類
2. **スタッフが話した内容**を各利用者の記録に振り分け
3. **出力形式**：
   ```
   【<% tp.date.now("YYYY年MM月DD日") %> 利用者別記録】
   記録者：[記録したスタッフ名]
   
   ■ [利用者名1]
   ・様子/変化：
   ・良かった点：
   ・気づき/課題：
   
   ■ [利用者名2]
   ・様子/変化：
   ・良かった点：
   ・気づき/課題：
   
   【申し送り事項】
   ・
   
   【記録者情報】
   作成者：[スタッフ名]
   作成日：<% tp.date.now("YYYY年MM月DD日") %>
   ```

4. **必須事項**：
   - 必ず出力の最後に「記録者：[スタッフ名]」を明記
   - 利用者ごとに情報を整理
   - 重要な申し送り事項は別途ハイライト
```

---

**記録者**: 　　　　　　　　**確認者**: 　　　　　　　　**日付**: <% tp.date.now("YYYY-MM-DD") %>

*このファイルは自動生成されました - <% tp.date.now("YYYY-MM-DD HH:mm") %>* 